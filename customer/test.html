<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="menus"></div>

    <section class="fixed-menu">
        <div class="menu-catagory">
            <h3>กะเพรา</h3>
            <ol class="menu-list">
                <li class="menu-item">
                    <span class="menu-name">กะเพราไก่</span>
                    <div class="quantity-control">
                        <button class="li-add-btn">+</button>
                        <div class="li-decrease" hidden>-</div>
                        <input class="li-quantity" type="text" value="1" hidden>
                        <div class="li-increase" hidden>+</div>
                    </div>
                </li>
            </ol>
        </div>
    </section>

    <button class="add">addcus</button>

</body>

<script>

    fetch("http://localhost:3000/menus")
        .then(res => res.json())
        .then(data => {
            displayMenusByCategory(data);
        });

    function displayMenusByCategory(data) {

        const container = document.querySelector(".menus");

        // 1) จัดกลุ่มตาม category
        const groups = {};
        data.forEach(item => {
            if (!groups[item.menu_category]) {
                groups[item.menu_category] = [];
            }
            groups[item.menu_category].push(item);
        });

        // 2) วนสร้าง HTML ตามหมวดหมู่
        for (const category in groups) {

            // กล่องหมวดหมู่
            const section = document.createElement("div");
            section.classList.add("menu-category");

            // หัวข้อหมวดหมู่
            const header = document.createElement("h3");
            header.textContent = category;
            section.appendChild(header);

            // list เมนูในหมู่
            const list = document.createElement("ol");
            list.classList.add("menu-list");

            groups[category].forEach(menu => {
                const li = document.createElement("li");
                li.classList.add("menu-item");

                const span = document.createElement("span");
                span.classList.add("menu-name");
                span.textContent = menu.menu_name;

                // สร้างกล่องใหญ่
                const quantityControl = document.createElement("div");
                quantityControl.classList.add("quantity-control");

                // ปุ่ม +
                const addBtn = document.createElement("button");
                addBtn.classList.add("li-add-btn");
                addBtn.textContent = "+";

                // ปุ่มลด (ซ่อนอยู่)
                const decreaseDiv = document.createElement("div");
                decreaseDiv.classList.add("li-decrease");
                decreaseDiv.hidden = true;
                decreaseDiv.textContent = "-";

                // input จำนวน (ซ่อนอยู่)
                const qtyInput = document.createElement("input");
                qtyInput.classList.add("li-quantity");
                qtyInput.type = "text";
                qtyInput.value = "1";
                qtyInput.hidden = true;

                // ปุ่มเพิ่ม (ซ่อนอยู่)
                const increaseDiv = document.createElement("div");
                increaseDiv.classList.add("li-increase");
                increaseDiv.hidden = true;
                increaseDiv.textContent = "+";

                // เอาทุกอย่างใส่ใน quantity-control
                quantityControl.appendChild(addBtn);
                quantityControl.appendChild(decreaseDiv);
                quantityControl.appendChild(qtyInput);
                quantityControl.appendChild(increaseDiv);

                li.appendChild(span);
                li.appendChild(quantityControl);
                list.appendChild(li);
            });

            section.appendChild(list);
            container.appendChild(section);
        }
    }
</script>


</html>